include(InstallRequiredSystemLibraries)

set(CPACK_MODULE_PATH "${CMAKE_CURRENT_SOURCE_DIR}")
set(CPACK_OUTPUT_FILE_PREFIX "packages")
set(CPACK_PACKAGE_CONTACT "${PROJECT_VENDOR}")
set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "Example project")
set(CPACK_PACKAGE_VENDOR "${PROJECT_VENDOR}")
set(CPACK_PACKAGE_VERSION "${PROJECT_VERSION}")
set(CPACK_PACKAGE_VERSION_MAJOR "${PROJECT_VERSION_MAJOR}")
set(CPACK_PACKAGE_VERSION_MINOR "${PROJECT_VERSION_MINOR}")
set(CPACK_PACKAGE_VERSION_PATCH "${PROJECT_VERSION_PATCH}")
set(CPACK_RESOURCE_FILE_LICENSE "${LICENSE_FILE}")
if(APPLE)
	set(CMAKE_INSTALL_PREFIX "/Applications")
	set(CPACK_GENERATOR "DragNDrop")
	set(CPACK_DMG_FORMAT "UDBZ")
	set(CPACK_DMG_VOLUME_NAME "${PROJECT_NAME}")
	set(CPACK_SYSTEM_NAME "OSX")
	set(CPACK_PACKAGE_FILE_NAME "${PROJECT_NAME}-${PROJECT_VERSION}")
    set(CPACK_PACKAGE_ICON "${ICONS_DIR}/example.icns")
    set(CPACK_DMG_BACKGROUND_IMAGE "${ICONS_DIR}/example.png")
elseif(WIN32)
	if(CMAKE_CL_64)
		set(CPACK_NSIS_INSTALL_ROOT "$PROGRAMFILES64")
	else()
		set(CPACK_NSIS_INSTALL_ROOT "$PROGRAMFILES")
	endif()
	set(CPACK_GENERATOR "NSIS")
	set(CPACK_NSIS_ENABLE_UNINSTALL_BEFORE_INSTALL ON)
	set(CPACK_NSIS_EXECUTABLES_DIRECTORY "${BIN_INSTALL_DIR}")
	set(CPACK_NSIS_URL_INFO_ABOUT "http://${PROJECT_DOMAIN}")
	set(CPACK_NSIS_MUI_FINISHPAGE_RUN "${PROJECT_NAME}")
	set(CPACK_NSIS_MUI_ICON "${ICONS_DIR}/example.ico")
	set(CPACK_NSIS_MUI_UNIICON "${ICONS_DIR}/example.ico")
	set(CPACK_NSIS_INSTALLED_ICON_NAME "${PROJECT_NAME}${CMAKE_EXECUTABLE_SUFFIX}")
	set(CPACK_NSIS_MENU_LINKS "${LICENSE_FILE}" "License")
	set(CPACK_PACKAGE_EXECUTABLES "${PROJECT_NAME}" "${PROJECT_NAME}")
	set(CPACK_PACKAGE_INSTALL_DIRECTORY "${PROJECT_NAME}")
else()
	set(CPACK_GENERATOR "DEB;RPM")
	set(CPACK_PACKAGE_FILE_NAME "${PROJECT_NAME}-${PROJECT_VERSION}")
endif()

include(CPack)